<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Currently, takes WIMP and AMRA data, reads it, cleans it, and prepares it for downstream analysis. 
    This package was written by a United States federal government employee in their official capacity therefore it is not protected by copyright and is in the public domain.  ">
<title>Takes epi2me output and makes it into R usable files • epi2me2r</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Takes epi2me output and makes it into R usable files">
<meta property="og:description" content="Currently, takes WIMP and AMRA data, reads it, cleans it, and prepares it for downstream analysis. 
    This package was written by a United States federal government employee in their official capacity therefore it is not protected by copyright and is in the public domain.  ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">epi2me2r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/epi2me2r-vignette.html">epi2me2r vignette</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mweinroth/epi2me2r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="epi2me2r">epi2me2r<a class="anchor" aria-label="anchor" href="#epi2me2r"></a>
</h1></div>
<p>epi2me2r is designed to take CSV output from Oxford Nanopore’s <a href="https://epi2me.nanoporetech.com/" class="external-link">EPI2ME</a> and facilitate the easy import of these documents into R for downstream analysis. The raw data are imported either into a <a href="https://bioconductor.org/packages/release/bioc/html/phyloseq.html" class="external-link">phyloseq</a> or <a href="https://www.bioconductor.org/packages/release/bioc/html/metagenomeSeq.html" class="external-link">metagenomeSeq</a> object, or count tables and taxonomy for other packages. Currently, raw data from WIMP and Antimicrobial Resistance (AMR) can be used as inputs.</p>
<div class="section level2">
<h2 id="contents">Contents<a class="anchor" aria-label="anchor" href="#contents"></a>
</h2>
<ul>
<li><a href="#Overview">Overview</a></li>
<li><a href="#Installation">Installation</a></li>
<li><a href="#Inputs">Inputs</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#Issues">Issues</a></li>
<li><a href="#Contact">Contact</a></li>
<li><a href="#Citation">Citation</a></li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h1>
<p>There are three main types of functions in <code>epi2me2r</code>:</p>
<ul>
<li>
<strong>fully automated</strong>: these functions take minimal input (just raw CSV files and metadata) and produce either <code>phyloseq</code> or <code>metagenomeSeq</code> objects for downstream analysis:<ul>
<li>
<code>raw_amr_to_phyloseq()</code><ul>
<li>input: directory with all epi2me generated AMR CSV files and metadata file as a CSV</li>
<li>output: <code>phyloseq</code> object with count table, taxonomy, and metadata</li>
</ul>
</li>
<li>
<code>raw_amr_to_metagenomeseq()</code><ul>
<li>input: directory with all epi2me generated AMR CSV files and metadata file as a CSV</li>
<li>output: <code>metagenomeSeq</code> object with count table, taxonomy, and metadata</li>
</ul>
</li>
<li>
<code>raw_wimp_to_phyloseq()</code><ul>
<li>input: directory with all epi2me generated WIMP CSV files and metadata file as a CSV</li>
<li>output: <code>phyloseq</code> object with count table, taxonomy, and metadata</li>
</ul>
</li>
<li>
<code>raw_wimp_to_metagenomeseq()</code><ul>
<li>input: directory with all epi2me generated WIMP CSV files and metadata file as a CSV</li>
<li>output: <code>metagenomeSeq</code> object with count table, taxonomy, and metadata</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>step-by-step</strong>: If you are looking for just a portion of the data you can use these functions to generate only what you need:<ul>
<li>
<code>read_in_amr_files</code><ul>
<li>input: directory with all epi2me generated AMR CSV files</li>
<li>output: count matrix of all samples x AMR genes</li>
</ul>
</li>
<li>
<code>read_in_wimp_files</code><ul>
<li>input: directory with all epi2me generated WIMP CSV files</li>
<li>output: count matrix of all samples x taxonomic classifications</li>
</ul>
</li>
<li>
<code>generate_amr_taxonomy</code><ul>
<li>input: count table from <code>read_in_amr_files</code> or generated in the same format</li>
<li>output: ontological list of all AMR genes in the same</li>
</ul>
</li>
<li>
<code>generate_wimp_taxonomy</code><ul>
<li>input: count table from <code>read_in_wimp_files</code> or generated in the same format</li>
<li>output: list of of all IDed organisms in the samples by superkingdom to species</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>other</strong>: An additional function we created but does not fit into the main workflows is <code><a href="reference/amr_read_taxonomy.html">amr_read_taxonomy()</a></code>. This function reads in both AMR and WIMP raw data and adds the taxonomic information to the AMR gene if available. This function uses the paths from both the raw AMR directory containing the AMR CSVs and the WIMP directory with all the raw WIMP CSVs. The output is a taxonomic classification of all AMR genes that have both classifications available.</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The development version of <code>epi2me2r</code> can currently be downloaded from GitHub:</p>
<pre><code><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'remotes'</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mweinroth/epi2me2r"</span><span class="op">)</span> 
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mweinroth.github.io/epi2me2r/">epi2me2r</a></span><span class="op">)</span></code></pre>
</div>
<div class="section level2">
<h2 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a>
</h2>
<p>To use <code>epi2me2r</code> you will need your <strong>raw data</strong> and a <strong>metadata file</strong>.</p>
<div class="section level3">
<h3 id="raw-data">raw data<a class="anchor" aria-label="anchor" href="#raw-data"></a>
</h3>
<p>Raw data files are downloaded from the EPI2ME report either in the WIMP or AMR CARD tab (Each sample will have 2 different files if you conducted both an AMR and WIMP analysis). Raw data will be downloaded as a CSV file with a separate file from each run. If you have barcodes for your samples, multiple samples will be contained in one CSV file; if not, each sample will have its own file. <strong>DO NOT</strong> change the names of the files you have downloaded, as the file name will have the type of analysis and run number in it (e.g., <code>arma_288715.csv</code> [<em>AMR</em>] or <code>226094_1777.csv</code> [<em>WIMP</em>]).</p>
<p><strong><em>Place all raw data files of the same analysis type in the directory with only those files in it!</em></strong></p>
<p>You will use this directory location when you import your samples.</p>
</div>
<div class="section level3">
<h3 id="metadata">metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>The second file you will need is a metadata file describing the type of samples you have, such as sample names. This file may also contain other important information about your samples such as treatments. There are four required columns if you are running both a WIMP and AMR analysis:</p>
<p>This file has <strong>4</strong> required columns that must be named as follows:</p>
<ul>
<li>
<code>arma_filename</code> : the original amr file name without the <code>.csv</code> extension</li>
<li>
<code>arma_barcode</code> : the barcodes of each sample (note: if you did not barcode any of your samples, enter <code>none</code> in all of the cells). <strong>In the AMR workflow, missing barcodes are coded as <code>none</code></strong>
</li>
<li>
<code>wimp_filename</code> : the original amr file name without the <code>.csv</code> extension</li>
<li>
<code>wimp_barcode</code> : the barcodes of each sample (note: if you did not barcode any of your samples, enter <code>NA</code> in all of the cells). <strong>In the WIMP workflow, missing barcodes are coded as <code>NA</code></strong>
</li>
<li>
<code>additional information</code> after these four required columns, you may include any additional metadata that is important, such as treatment type, sample numbers, etc.</li>
</ul>
<p><strong>A quick note about barcodes:</strong> As talked about in the <a href="#Issues">Issues</a> section below, earlier versions of the epi2me workflow list ARMA barcodes as <code>"barcode"</code> and a two digit number while WIMP barcodes are listed as <code>"BC"</code> and a two digit number. While this is no longer the case (both are written as <code>barcode</code> followed by the number), if you are using older output, see the section below on changing the barcodes to a compatible style.</p>
<p><a href="https://github.com/mweinroth/epi2me2r/blob/master/inst/extdata/example_metadata.csv" class="external-link">An example CSV is available here.</a></p>
<div class="figure">
<img src="https://github.com/mweinroth/epi2me2r/blob/master/inst/metadata-example.jpg" alt=""><p class="caption">First few rows of example CSV</p>
</div>
</div>
<div class="section level3">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h3>
<p>See <a href="https://mweinroth.github.io/epi2me2r/articles/epi2me2r-vignette.html">vignette</a> for usage.</p>
</div>
</div>
<div class="section level2">
<h2 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h2>
<p>The current ARMA and WIMP barcodes have mostly compatible barcodes nomenclature (the only difference being ARMA files without barcodes are entered as <code>none</code> and WIMP as <code>NA</code>). However, in early epi2me versions, ARMA barcodes were listed as <code>"barcode"</code> and a two digit number while WIMP barcodes were listed as <code>"BC"</code> and a two digit number. While this is no longer the case (both are formatted as <code>"barcode"</code> followed by the number), if you are using older output, you will need to replace the <code>"BC"</code> in the WIMP files with <code>"barcode"</code>. You can do this through opening the file and <code>Ctrl+H</code> to search and replace all <code>"BC"</code> with <code>"barcode"</code> in Excel or another text editor or in R:</p>
<pre><code><span class="va">fake.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"226094_1777.csv"</span><span class="op">)</span> <span class="co">#read in data</span>
<span class="va">fake.data</span><span class="op">$</span><span class="va">barcode</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"BC*"</span>, <span class="st">"barcode"</span>, <span class="va">fake.data</span><span class="op">$</span><span class="va">barcode</span><span class="op">)</span> <span class="co">#sub</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fake.data</span><span class="op">)</span> <span class="co">#check to see if it worked</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">fake.data</span>, <span class="st">"226094_1777.csv"</span><span class="op">)</span> <span class="co">#save it (this overwrites original)</span></code></pre>
</div>
</div>
<div class="section level1">
<h1 id="contact">Contact<a class="anchor" aria-label="anchor" href="#contact"></a>
</h1>
<p>Any questions or comments can be directed to Maggie Weinroth: <a href="mailto:maggie.weinroth@usda.gov" class="email">maggie.weinroth@usda.gov</a></p>
</div>
<div class="section level1">
<h1 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h1>
<p>.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mweinroth/epi2me2r/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mweinroth/epi2me2r/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>CC0</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing epi2me2r</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Maggie Weinroth <br><small class="roles"> Author, maintainer </small>  </li>
<li>Quentin D. Read <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Maggie Weinroth, Quentin D. Read.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
